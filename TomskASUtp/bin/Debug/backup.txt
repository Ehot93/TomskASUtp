using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using System.Xml;
using System.IO;


namespace TomskASUtp
{
    class Program
    {
        static string inpxml = "";

        static void Main(string[] args)
        {
            XmlDocument doc = new XmlDocument();
            //string outxml;
            Check();
            Console.Write("Вы ввели файл " + inpxml + "\n");
            doc.Load(inpxml);
            //string xmldoc = doc.SelectSingleNode()
            
            //outxml = Console.ReadLine();
            //doc.Save(outxml);
            //Console.Write("\n" + "Файл записан");
            string outjson = JsonConvert.SerializeXmlNode(doc);
            //XmlDocument outjson2 = JsonConvert.DeserializeObject(outjson);
            Console.Write("Введите файл для записи" + "\n");
            string name = Console.ReadLine();
            StreamWriter sf = new StreamWriter(name ,false);
            sf.WriteLine(outjson);
            //doc.Save(outjson);
            Console.Write("\n" + "Файл записан");
            //Console.Write(outjson);
            Console.ReadKey();
        }

        static void Check()
        {
            Console.Write("Введите имя файла и расширение разделенные точкой " + "\n");
            inpxml = Console.ReadLine();
            if (File.Exists(inpxml))
            {
                Console.Write("\n Данные верны" + "\n");
            }
            else
            {
                Console.Write("Файл не существует" + "\n");
                Check();
            }
            
        }
    }
}